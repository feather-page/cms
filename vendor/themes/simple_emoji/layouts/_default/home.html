{{ define "main" }}
  <ul class="page-list">
  {{- range .Site.Menus.main }}
    <li>
      {{ .Params.Emoji }} <a class="page-link" href="{{ .URL }}">{{ .Name }}</a>
    </li>
  {{- end }}
  </ul>

  {{ .Content | replaceRE `/images/` (print $.Site.BaseURL `images/`) | safeHTML }}
  <hr />

  <h2>ðŸ–Š Blogposts</h2>

  <div class="page-list">
    {{ range sort ( where .Site.RegularPages "Type" "posts" ) .Params.date "value" "desc" }}
      <article>
        {{ if isset .Params "short" }}
            {{- with .Params.book }}
            <div class="post-book-card">
              {{ if .cover }}
              <img src="{{ .cover }}" alt="{{ .title }}" class="post-book-cover">
              {{ else if .emoji }}
              <span class="post-book-emoji">{{ .emoji }}</span>
              {{ end }}
              <div class="post-book-info">
                <div class="post-book-title">{{ .title }}</div>
                <div class="post-book-author">{{ .author }}</div>
                {{ with .rating }}{{ $r := . }}
                <div class="post-book-rating">{{ range seq 1 5 }}{{ if le . $r }}â˜…{{ else }}â˜†{{ end }}{{ end }}</div>
                {{ end }}
              </div>
            </div>
            {{- end }}
            <div class="post-shortBody">
              {{ if and (isset .Params "emoji") (not .Params.book) }}
              <div class="post-emoji">{{ .Params.Emoji }}</div>
              {{ end }}
              <div class="post-content">{{ .Content | replaceRE `/images/` (print $.Site.BaseURL `images/`) | safeHTML }}</div>
            </div>
            <div class="post-date">{{ .Date | time.Format ":date_medium" }}</div>
        {{ else }}
          {{ if isset .Params "emoji" }}{{ .Params.Emoji }}{{ end }}
          <a class="post-title" href="{{ .Permalink }}">{{ .Title }}</a>
          {{ with .Params.book.rating }}{{ $r := . }}
          <span class="rating" aria-label="{{ . }} out of 5 stars">
            {{ range seq 1 5 }}{{ if le . $r }}â˜…{{ else }}â˜†{{ end }}{{ end }}
          </span>
          {{ end }}
          <div class="post-date">{{ .Date | time.Format ":date_medium" }}</div>
        {{ end }}
      </article>
      <hr />
    {{ end }}
  </div>
{{ end }}
