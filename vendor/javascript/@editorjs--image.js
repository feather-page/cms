var C="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var S={};!function(C,j){S=j()}(window,(function(){return function(C){var S={};function n(j){if(S[j])return S[j].exports;var T=S[j]={i:j,l:!1,exports:{}};return C[j].call(T.exports,T,T.exports,n),T.l=!0,T.exports}return n.m=C,n.c=S,n.d=function(C,S,j){n.o(C,S)||Object.defineProperty(C,S,{enumerable:!0,get:j})},n.r=function(C){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})},n.t=function(C,S){if(1&S&&(C=n(C)),8&S)return C;if(4&S&&"object"==typeof C&&C&&C.__esModule)return C;var j=Object.create(null);if(n.r(j),Object.defineProperty(j,"default",{enumerable:!0,value:C}),2&S&&"string"!=typeof C)for(var T in C)n.d(j,T,function(S){return C[S]}.bind(null,T));return j},n.n=function(C){var S=C&&C.__esModule?function(){return C.default}:function(){return C};return n.d(S,"a",S),S},n.o=function(C,S){return Object.prototype.hasOwnProperty.call(C,S)},n.p="/",n(n.s=9)}([function(C,S){function n(C,S){for(var j=0;j<S.length;j++){var T=S[j];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(C,T.key,T)}}C.exports=function(C,S,j){return S&&n(C.prototype,S),j&&n(C,j),C}},function(S,j,T){window,S.exports=function(C){var S={};function n(j){if(S[j])return S[j].exports;var T=S[j]={i:j,l:!1,exports:{}};return C[j].call(T.exports,T,T.exports,n),T.l=!0,T.exports}return n.m=C,n.c=S,n.d=function(C,S,j){n.o(C,S)||Object.defineProperty(C,S,{enumerable:!0,get:j})},n.r=function(C){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})},n.t=function(C,S){if(1&S&&(C=n(C)),8&S)return C;if(4&S&&"object"==typeof C&&C&&C.__esModule)return C;var j=Object.create(null);if(n.r(j),Object.defineProperty(j,"default",{enumerable:!0,value:C}),2&S&&"string"!=typeof C)for(var T in C)n.d(j,T,function(S){return C[S]}.bind(null,T));return j},n.n=function(C){var S=C&&C.__esModule?function(){return C.default}:function(){return C};return n.d(S,"a",S),S},n.o=function(C,S){return Object.prototype.hasOwnProperty.call(C,S)},n.p="",n(n.s=3)}([function(S,j){var T;T=function(){return this||C}();try{T=T||new Function("return this")()}catch(S){"object"==typeof window&&(T=window)}S.exports=T},function(S,j,T){(function(S){var O=T(2),L=setTimeout;function i(){}function a(S){if(!((this||C)instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof S)throw new TypeError("not a function");(this||C)._state=0,(this||C)._handled=!1,(this||C)._value=void 0,(this||C)._deferreds=[],f(S,this||C)}function u(C,S){for(;3===C._state;)C=C._value;0!==C._state?(C._handled=!0,a._immediateFn((function(){var j=1===C._state?S.onFulfilled:S.onRejected;if(null!==j){var T;try{T=j(C._value)}catch(C){return void s(S.promise,C)}c(S.promise,T)}else(1===C._state?c:s)(S.promise,C._value)}))):C._deferreds.push(S)}function c(C,S){try{if(S===C)throw new TypeError("A promise cannot be resolved with itself.");if(S&&("object"==typeof S||"function"==typeof S)){var j=S.then;if(S instanceof a)return C._state=3,C._value=S,void l(C);if("function"==typeof j)return void f((T=j,O=S,function(){T.apply(O,arguments)}),C)}C._state=1,C._value=S,l(C)}catch(S){s(C,S)}var T,O}function s(C,S){C._state=2,C._value=S,l(C)}function l(C){2===C._state&&0===C._deferreds.length&&a._immediateFn((function(){C._handled||a._unhandledRejectionFn(C._value)}));for(var S=0,j=C._deferreds.length;S<j;S++)u(C,C._deferreds[S]);C._deferreds=null}function d(S,j,T){(this||C).onFulfilled="function"==typeof S?S:null,(this||C).onRejected="function"==typeof j?j:null,(this||C).promise=T}function f(C,S){var j=!1;try{C((function(C){j||(j=!0,c(S,C))}),(function(C){j||(j=!0,s(S,C))}))}catch(C){if(j)return;j=!0,s(S,C)}}a.prototype.catch=function(C){return this.then(null,C)},a.prototype.then=function(S,j){var T=new(this||C).constructor(i);return u(this||C,new d(S,j,T)),T},a.prototype.finally=O.a,a.all=function(C){return new a((function(S,j){if(!C||void 0===C.length)throw new TypeError("Promise.all accepts an array");var T=Array.prototype.slice.call(C);if(0===T.length)return S([]);var O=T.length;function i(C,L){try{if(L&&("object"==typeof L||"function"==typeof L)){var M=L.then;if("function"==typeof M)return void M.call(L,(function(S){i(C,S)}),j)}T[C]=L,0==--O&&S(T)}catch(C){j(C)}}for(var L=0;L<T.length;L++)i(L,T[L])}))},a.resolve=function(C){return C&&"object"==typeof C&&C.constructor===a?C:new a((function(S){S(C)}))},a.reject=function(C){return new a((function(S,j){j(C)}))},a.race=function(C){return new a((function(S,j){for(var T=0,O=C.length;T<O;T++)C[T].then(S,j)}))},a._immediateFn="function"==typeof S&&function(C){S(C)}||function(C){L(C,0)},a._unhandledRejectionFn=function(C){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",C)},j.a=a}).call(this||C,T(5).setImmediate)},function(S,j,T){j.a=function(S){var j=(this||C).constructor;return this.then((function(C){return j.resolve(S()).then((function(){return C}))}),(function(C){return j.resolve(S()).then((function(){return j.reject(C)}))}))}},function(C,S,j){function r(C){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(C){return typeof C}:function(C){return C&&"function"==typeof Symbol&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(C)}j(4);var T,O,L,M,F,P,I,R=j(8),N=(O=function(C){return new Promise((function(S,j){C=M(C),(C=F(C)).beforeSend&&C.beforeSend();var T=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");T.open(C.method,C.url),T.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(C.headers).forEach((function(S){var j=C.headers[S];T.setRequestHeader(S,j)}));var O=C.ratio;T.upload.addEventListener("progress",(function(S){var j=Math.round(S.loaded/S.total*100),T=Math.ceil(j*O/100);C.progress(Math.min(T,100))}),!1),T.addEventListener("progress",(function(S){var j=Math.round(S.loaded/S.total*100),T=Math.ceil(j*(100-O)/100)+O;C.progress(Math.min(T,100))}),!1),T.onreadystatechange=function(){if(4===T.readyState){var C=T.response;try{C=JSON.parse(C)}catch(C){}var O=R.parseHeaders(T.getAllResponseHeaders()),L={body:C,code:T.status,headers:O};I(T.status)?S(L):j(L)}},T.send(C.data)}))},L=function(C){return C.method="POST",O(C)},M=function(){var C=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(C.url&&"string"!=typeof C.url)throw new Error("Url must be a string");if(C.url=C.url||"",C.method&&"string"!=typeof C.method)throw new Error("`method` must be a string or null");if(C.method=C.method?C.method.toUpperCase():"GET",C.headers&&"object"!==r(C.headers))throw new Error("`headers` must be an object or null");if(C.headers=C.headers||{},C.type&&("string"!=typeof C.type||!Object.values(T).includes(C.type)))throw new Error("`type` must be taken from module's «contentType» library");if(C.progress&&"function"!=typeof C.progress)throw new Error("`progress` must be a function or null");if(C.progress=C.progress||function(C){},C.beforeSend=C.beforeSend||function(C){},C.ratio&&"number"!=typeof C.ratio)throw new Error("`ratio` must be a number");if(C.ratio<0||C.ratio>100)throw new Error("`ratio` must be in a 0-100 interval");if(C.ratio=C.ratio||90,C.accept&&"string"!=typeof C.accept)throw new Error("`accept` must be a string with a list of allowed mime-types");if(C.accept=C.accept||"*/*",C.multiple&&"boolean"!=typeof C.multiple)throw new Error("`multiple` must be a true or false");if(C.multiple=C.multiple||!1,C.fieldName&&"string"!=typeof C.fieldName)throw new Error("`fieldName` must be a string");return C.fieldName=C.fieldName||"files",C},F=function(C){switch(C.method){case"GET":var S=P(C.data,T.URLENCODED);delete C.data,C.url=/\?/.test(C.url)?C.url+"&"+S:C.url+"?"+S;break;case"POST":case"PUT":case"DELETE":case"UPDATE":var j=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).type||T.JSON}(C);(R.isFormData(C.data)||R.isFormElement(C.data))&&(j=T.FORM),C.data=P(C.data,j),j!==N.contentType.FORM&&(C.headers["content-type"]=j)}return C},P=function(){var C=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(arguments.length>1?arguments[1]:void 0){case T.URLENCODED:return R.urlEncode(C);case T.JSON:return R.jsonEncode(C);case T.FORM:return R.formEncode(C);default:return C}},I=function(C){return C>=200&&C<300},{contentType:T={URLENCODED:"application/x-www-form-urlencoded; charset=utf-8",FORM:"multipart/form-data",JSON:"application/json; charset=utf-8"},request:O,get:function(C){return C.method="GET",O(C)},post:L,transport:function(C){return C=M(C),R.selectFiles(C).then((function(S){for(var j=new FormData,T=0;T<S.length;T++)j.append(C.fieldName,S[T],S[T].name);R.isObject(C.data)&&Object.keys(C.data).forEach((function(S){var T=C.data[S];j.append(S,T)}));var O=C.beforeSend;return C.beforeSend=function(){return O(S)},C.data=j,L(C)}))},selectFiles:function(C){return delete(C=M(C)).beforeSend,R.selectFiles(C)}});C.exports=N},function(C,S,j){j.r(S);var T=j(1);window.Promise=window.Promise||T.a},function(S,j,T){(function(S){var O=void 0!==S&&S||"undefined"!=typeof self&&self||window,L=Function.prototype.apply;function i(S,j){(this||C)._id=S,(this||C)._clearFn=j}j.setTimeout=function(){return new i(L.call(setTimeout,O,arguments),clearTimeout)},j.setInterval=function(){return new i(L.call(setInterval,O,arguments),clearInterval)},j.clearTimeout=j.clearInterval=function(C){C&&C.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){(this||C)._clearFn.call(O,(this||C)._id)},j.enroll=function(C,S){clearTimeout(C._idleTimeoutId),C._idleTimeout=S},j.unenroll=function(C){clearTimeout(C._idleTimeoutId),C._idleTimeout=-1},j._unrefActive=j.active=function(C){clearTimeout(C._idleTimeoutId);var S=C._idleTimeout;S>=0&&(C._idleTimeoutId=setTimeout((function(){C._onTimeout&&C._onTimeout()}),S))},T(6),j.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==S&&S.setImmediate||(this||C)&&(this||C).setImmediate,j.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==S&&S.clearImmediate||(this||C)&&(this||C).clearImmediate}).call(this||C,T(0))},function(S,j,T){(function(S,j){!function(C,S){if(!C.setImmediate){var T,O,L,M,F,P=1,I={},R=!1,N=C.document,H=Object.getPrototypeOf&&Object.getPrototypeOf(C);H=H&&H.setTimeout?H:C,"[object process]"==={}.toString.call(C.process)?T=function(C){j.nextTick((function(){h(C)}))}:function(){if(C.postMessage&&!C.importScripts){var S=!0,j=C.onmessage;return C.onmessage=function(){S=!1},C.postMessage("","*"),C.onmessage=j,S}}()?(M="setImmediate$"+Math.random()+"$",F=function(S){S.source===C&&"string"==typeof S.data&&0===S.data.indexOf(M)&&h(+S.data.slice(M.length))},C.addEventListener?C.addEventListener("message",F,!1):C.attachEvent("onmessage",F),T=function(S){C.postMessage(M+S,"*")}):C.MessageChannel?((L=new MessageChannel).port1.onmessage=function(C){h(C.data)},T=function(C){L.port2.postMessage(C)}):N&&"onreadystatechange"in N.createElement("script")?(O=N.documentElement,T=function(C){var S=N.createElement("script");S.onreadystatechange=function(){h(C),S.onreadystatechange=null,O.removeChild(S),S=null},O.appendChild(S)}):T=function(C){setTimeout(h,0,C)},H.setImmediate=function(C){"function"!=typeof C&&(C=new Function(""+C));for(var S=new Array(arguments.length-1),j=0;j<S.length;j++)S[j]=arguments[j+1];var O={callback:C,args:S};return I[P]=O,T(P),P++},H.clearImmediate=p}function p(C){delete I[C]}function h(C){if(R)setTimeout(h,0,C);else{var S=I[C];if(S){R=!0;try{!function(C){var S=C.callback,j=C.args;switch(j.length){case 0:S();break;case 1:S(j[0]);break;case 2:S(j[0],j[1]);break;case 3:S(j[0],j[1],j[2]);break;default:S.apply(void 0,j)}}(S)}finally{p(C),R=!1}}}}}("undefined"==typeof self?void 0===S?this||C:S:self)}).call(this||C,T(0),T(7))},function(S,j){var T,O,L=S.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(S){if(T===setTimeout)return setTimeout(S,0);if((T===i||!T)&&setTimeout)return T=setTimeout,setTimeout(S,0);try{return T(S,0)}catch(j){try{return T.call(null,S,0)}catch(j){return T.call(this||C,S,0)}}}!function(){try{T="function"==typeof setTimeout?setTimeout:i}catch(C){T=i}try{O="function"==typeof clearTimeout?clearTimeout:a}catch(C){O=a}}();var M,F=[],P=!1,I=-1;function f(){P&&M&&(P=!1,M.length?F=M.concat(F):I=-1,F.length&&p())}function p(){if(!P){var S=u(f);P=!0;for(var j=F.length;j;){for(M=F,F=[];++I<j;)M&&M[I].run();I=-1,j=F.length}M=null,P=!1,function(S){if(O===clearTimeout)return clearTimeout(S);if((O===a||!O)&&clearTimeout)return O=clearTimeout,clearTimeout(S);try{O(S)}catch(j){try{return O.call(null,S)}catch(j){return O.call(this||C,S)}}}(S)}}function h(S,j){(this||C).fun=S,(this||C).array=j}function m(){}L.nextTick=function(C){var S=new Array(arguments.length-1);if(arguments.length>1)for(var j=1;j<arguments.length;j++)S[j-1]=arguments[j];F.push(new h(C,S)),1!==F.length||P||u(p)},h.prototype.run=function(){(this||C).fun.apply(null,(this||C).array)},L.title="browser",L.browser=!0,L.env={},L.argv=[],L.version="",L.versions={},L.on=m,L.addListener=m,L.once=m,L.off=m,L.removeListener=m,L.removeAllListeners=m,L.emit=m,L.prependListener=m,L.prependOnceListener=m,L.listeners=function(C){return[]},L.binding=function(C){throw new Error("process.binding is not supported")},L.cwd=function(){return"/"},L.chdir=function(C){throw new Error("process.chdir is not supported")},L.umask=function(){return 0}},function(S,j,T){function r(C,S){for(var j=0;j<S.length;j++){r=S[j];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(C,r.key,r)}}var O=T(9);S.exports=function(){function e(){!function(C,S){if(!(C instanceof S))throw new TypeError("Cannot call a class as a function")}(this||C,e)}var S,j;return S=e,(j=[{key:"urlEncode",value:function(C){return O(C)}},{key:"jsonEncode",value:function(C){return JSON.stringify(C)}},{key:"formEncode",value:function(C){if(this.isFormData(C))return C;if(this.isFormElement(C))return new FormData(C);if(this.isObject(C)){var S=new FormData;return Object.keys(C).forEach((function(j){var T=C[j];S.append(j,T)})),S}throw new Error("`data` must be an instance of Object, FormData or <FORM> HTMLElement")}},{key:"isObject",value:function(C){return"[object Object]"===Object.prototype.toString.call(C)}},{key:"isFormData",value:function(C){return C instanceof FormData}},{key:"isFormElement",value:function(C){return C instanceof HTMLFormElement}},{key:"selectFiles",value:function(){var C=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(S,j){var T=document.createElement("INPUT");T.type="file",C.multiple&&T.setAttribute("multiple","multiple"),C.accept&&T.setAttribute("accept",C.accept),T.style.display="none",document.body.appendChild(T),T.addEventListener("change",(function(C){var j=C.target.files;S(j),document.body.removeChild(T)}),!1),T.click()}))}},{key:"parseHeaders",value:function(C){var S=C.trim().split(/[\r\n]+/),j={};return S.forEach((function(C){var S=C.split(": "),T=S.shift(),O=S.join(": ");T&&(j[T]=O)})),j}}])&&r(S,j),e}()},function(C,S){var n=function(C){return encodeURIComponent(C).replace(/[!'()*]/g,escape).replace(/%20/g,"+")},r=function(C,S,j,T){return S=S||null,j=j||"&",T=T||null,C?function(C){for(var S=new Array,j=0;j<C.length;j++)C[j]&&S.push(C[j]);return S}(Object.keys(C).map((function(O){var L,M,F=O;if(T&&(F=T+"["+F+"]"),"object"==typeof C[O]&&null!==C[O])L=r(C[O],null,j,F);else{S&&(M=F,F=!isNaN(parseFloat(M))&&isFinite(M)?S+Number(F):F);var P=C[O];P=(P=0===(P=!1===(P=!0===P?"1":P)?"0":P)?"0":P)||"",L=n(F)+"="+n(P)}return L}))).join(j).replace(/[!'()*]/g,""):""};C.exports=r}])},function(C,S){C.exports=function(C,S){if(!(C instanceof S))throw new TypeError("Cannot call a class as a function")}},function(C,S,j){C.exports=j(10)},function(C,S){C.exports=function(C,S){(null==S||S>C.length)&&(S=C.length);for(var j=0,T=new Array(S);j<S;j++)T[j]=C[j];return T}},function(C,S,j){var T=j(4);C.exports=function(C,S){if(C){if("string"==typeof C)return T(C,S);var j=Object.prototype.toString.call(C).slice(8,-1);return"Object"===j&&C.constructor&&(j=C.constructor.name),"Map"===j||"Set"===j?Array.from(j):"Arguments"===j||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j)?T(C,S):void 0}}},function(S,j){function n(C,S,j,T,O,L,M){try{var F=C[L](M),P=F.value}catch(C){return void j(C)}F.done?S(P):Promise.resolve(P).then(T,O)}S.exports=function(S){return function(){var j=this||C,T=arguments;return new Promise((function(C,O){var L=S.apply(j,T);function u(S){n(L,C,O,u,c,"next",S)}function c(S){n(L,C,O,u,c,"throw",S)}u(void 0)}))}}},function(C,S,j){var T=j(15),O=j(16),L=j(5),M=j(17);C.exports=function(C){return T(C)||O(C)||L(C)||M()}},function(C,S,j){var T=j(18),O=j(19),L=j(5),M=j(20);C.exports=function(C,S){return T(C)||O(C,S)||L(C,S)||M()}},function(C,S,j){C.exports=j(21)},function(S,j,T){var O=function(S){var j=Object.prototype,T=j.hasOwnProperty,O="function"==typeof Symbol?Symbol:{},L=O.iterator||"@@iterator",M=O.asyncIterator||"@@asyncIterator",F=O.toStringTag||"@@toStringTag";function u(C,S,j,T){var O=S&&S.prototype instanceof l?S:l,L=Object.create(O.prototype),M=new _(T||[]);return L._invoke=function(C,S,j){var T="suspendedStart";return function(O,L){if("executing"===T)throw new Error("Generator is already running");if("completed"===T){if("throw"===O)throw L;return E()}for(j.method=O,j.arg=L;;){var M=j.delegate;if(M){var F=b(M,j);if(F){if(F===P)continue;return F}}if("next"===j.method)j.sent=j._sent=j.arg;else if("throw"===j.method){if("suspendedStart"===T)throw T="completed",j.arg;j.dispatchException(j.arg)}else"return"===j.method&&j.abrupt("return",j.arg);T="executing";var I=c(C,S,j);if("normal"===I.type){if(T=j.done?"completed":"suspendedYield",I.arg===P)continue;return{value:I.arg,done:j.done}}"throw"===I.type&&(T="completed",j.method="throw",j.arg=I.arg)}}}(C,j,M),L}function c(C,S,j){try{return{type:"normal",arg:C.call(S,j)}}catch(C){return{type:"throw",arg:C}}}S.wrap=u;var P={};function l(){}function d(){}function f(){}var I={};I[L]=function(){return this||C};var R=Object.getPrototypeOf,N=R&&R(R(x([])));N&&N!==j&&T.call(N,L)&&(I=N);var H=f.prototype=l.prototype=Object.create(I);function y(C){["next","throw","return"].forEach((function(S){C[S]=function(C){return this._invoke(S,C)}}))}function v(S,j){var O;(this||C)._invoke=function(C,L){function a(){return new j((function(O,M){!function r(C,O,L,M){var F=c(S[C],S,O);if("throw"!==F.type){var P=F.arg,I=P.value;return I&&"object"==typeof I&&T.call(I,"__await")?j.resolve(I.__await).then((function(C){r("next",C,L,M)}),(function(C){r("throw",C,L,M)})):j.resolve(I).then((function(C){P.value=C,L(P)}),(function(C){return r("throw",C,L,M)}))}M(F.arg)}(C,L,O,M)}))}return O=O?O.then(a,a):a()}}function b(C,S){var j=C.iterator[S.method];if(void 0===j){if(S.delegate=null,"throw"===S.method){if(C.iterator.return&&(S.method="return",S.arg=void 0,b(C,S),"throw"===S.method))return P;S.method="throw",S.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var T=c(j,C.iterator,S.arg);if("throw"===T.type)return S.method="throw",S.arg=T.arg,S.delegate=null,P;var O=T.arg;return O?O.done?(S[C.resultName]=O.value,S.next=C.nextLoc,"return"!==S.method&&(S.method="next",S.arg=void 0),S.delegate=null,P):O:(S.method="throw",S.arg=new TypeError("iterator result is not an object"),S.delegate=null,P)}function w(S){var j={tryLoc:S[0]};1 in S&&(j.catchLoc=S[1]),2 in S&&(j.finallyLoc=S[2],j.afterLoc=S[3]),(this||C).tryEntries.push(j)}function k(C){var S=C.completion||{};S.type="normal",delete S.arg,C.completion=S}function _(S){(this||C).tryEntries=[{tryLoc:"root"}],S.forEach(w,this||C),this.reset(!0)}function x(C){if(C){var S=C[L];if(S)return S.call(C);if("function"==typeof C.next)return C;if(!isNaN(C.length)){var j=-1,O=function t(){for(;++j<C.length;)if(T.call(C,j))return t.value=C[j],t.done=!1,t;return t.value=void 0,t.done=!0,t};return O.next=O}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=H.constructor=f,f.constructor=d,f[F]=d.displayName="GeneratorFunction",S.isGeneratorFunction=function(C){var S="function"==typeof C&&C.constructor;return!!S&&(S===d||"GeneratorFunction"===(S.displayName||S.name))},S.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,f):(C.__proto__=f,F in C||(C[F]="GeneratorFunction")),C.prototype=Object.create(H),C},S.awrap=function(C){return{__await:C}},y(v.prototype),v.prototype[M]=function(){return this||C},S.AsyncIterator=v,S.async=function(C,j,T,O,L){void 0===L&&(L=Promise);var M=new v(u(C,j,T,O),L);return S.isGeneratorFunction(j)?M:M.next().then((function(C){return C.done?C.value:M.next()}))},y(H),H[F]="Generator",H[L]=function(){return this||C},H.toString=function(){return"[object Generator]"},S.keys=function(C){var S=[];for(var j in C)S.push(j);return S.reverse(),function n(){for(;S.length;){var j=S.pop();if(j in C)return n.value=j,n.done=!1,n}return n.done=!0,n}},S.values=x,_.prototype={constructor:_,reset:function(S){if((this||C).prev=0,(this||C).next=0,(this||C).sent=(this||C)._sent=void 0,(this||C).done=!1,(this||C).delegate=null,(this||C).method="next",(this||C).arg=void 0,(this||C).tryEntries.forEach(k),!S)for(var j in this||C)"t"===j.charAt(0)&&T.call(this||C,j)&&!isNaN(+j.slice(1))&&((this||C)[j]=void 0)},stop:function(){(this||C).done=!0;var S=(this||C).tryEntries[0].completion;if("throw"===S.type)throw S.arg;return(this||C).rval},dispatchException:function(S){if((this||C).done)throw S;var j=this||C;function r(C,T){return M.type="throw",M.arg=S,j.next=C,T&&(j.method="next",j.arg=void 0),!!T}for(var O=(this||C).tryEntries.length-1;O>=0;--O){var L=(this||C).tryEntries[O],M=L.completion;if("root"===L.tryLoc)return r("end");if(L.tryLoc<=(this||C).prev){var F=T.call(L,"catchLoc"),P=T.call(L,"finallyLoc");if(F&&P){if((this||C).prev<L.catchLoc)return r(L.catchLoc,!0);if((this||C).prev<L.finallyLoc)return r(L.finallyLoc)}else if(F){if((this||C).prev<L.catchLoc)return r(L.catchLoc,!0)}else{if(!P)throw new Error("try statement without catch or finally");if((this||C).prev<L.finallyLoc)return r(L.finallyLoc)}}}},abrupt:function(S,j){for(var O=(this||C).tryEntries.length-1;O>=0;--O){var L=(this||C).tryEntries[O];if(L.tryLoc<=(this||C).prev&&T.call(L,"finallyLoc")&&(this||C).prev<L.finallyLoc){var M=L;break}}M&&("break"===S||"continue"===S)&&M.tryLoc<=j&&j<=M.finallyLoc&&(M=null);var F=M?M.completion:{};return F.type=S,F.arg=j,M?((this||C).method="next",(this||C).next=M.finallyLoc,P):this.complete(F)},complete:function(S,j){if("throw"===S.type)throw S.arg;return"break"===S.type||"continue"===S.type?(this||C).next=S.arg:"return"===S.type?((this||C).rval=(this||C).arg=S.arg,(this||C).method="return",(this||C).next="end"):"normal"===S.type&&j&&((this||C).next=j),P},finish:function(S){for(var j=(this||C).tryEntries.length-1;j>=0;--j){var T=(this||C).tryEntries[j];if(T.finallyLoc===S)return this.complete(T.completion,T.afterLoc),k(T),P}},catch:function(S){for(var j=(this||C).tryEntries.length-1;j>=0;--j){var T=(this||C).tryEntries[j];if(T.tryLoc===S){var O=T.completion;if("throw"===O.type){var L=O.arg;k(T)}return L}}throw new Error("illegal catch attempt")},delegateYield:function(S,j,T){return(this||C).delegate={iterator:x(S),resultName:j,nextLoc:T},"next"===(this||C).method&&((this||C).arg=void 0),P}},S}(S.exports);try{C.regeneratorRuntime=O}catch(S){Function("r","regeneratorRuntime = r")(O)}},function(C,S,j){var T=j(12),O=j(13);"string"==typeof(O=O.__esModule?O.default:O)&&(O=[[C.i,O,""]]);var L={insert:"head",singleton:!1},M=(T(O,L),O.locals?O.locals:{});C.exports=M},function(C,S,j){var T,o=function(){return void 0===T&&(T=Boolean(window&&document&&document.all&&!window.atob)),T},O=function(){var C={};return function(S){if(void 0===C[S]){var j=document.querySelector(S);if(window.HTMLIFrameElement&&j instanceof window.HTMLIFrameElement)try{j=j.contentDocument.head}catch(C){j=null}C[S]=j}return C[S]}}(),L=[];function u(C){for(var S=-1,j=0;j<L.length;j++)if(L[j].identifier===C){S=j;break}return S}function c(C,S){for(var j={},T=[],O=0;O<C.length;O++){var M=C[O],F=S.base?M[0]+S.base:M[0],P=j[F]||0,I="".concat(F," ").concat(P);j[F]=P+1;var R=u(I),N={css:M[1],media:M[2],sourceMap:M[3]};-1!==R?(L[R].references++,L[R].updater(N)):L.push({identifier:I,updater:g(N,S),references:1}),T.push(I)}return T}function s(C){var S=document.createElement("style"),T=C.attributes||{};if(void 0===T.nonce){var L=j.nc;L&&(T.nonce=L)}if(Object.keys(T).forEach((function(C){S.setAttribute(C,T[C])})),"function"==typeof C.insert)C.insert(S);else{var M=O(C.insert||"head");if(!M)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");M.appendChild(S)}return S}var M,F=(M=[],function(C,S){return M[C]=S,M.filter(Boolean).join("\n")});function f(C,S,j,T){var O=j?"":T.media?"@media ".concat(T.media," {").concat(T.css,"}"):T.css;if(C.styleSheet)C.styleSheet.cssText=F(S,O);else{var L=document.createTextNode(O),M=C.childNodes;M[S]&&C.removeChild(M[S]),M.length?C.insertBefore(L,M[S]):C.appendChild(L)}}function p(C,S,j){var T=j.css,O=j.media,L=j.sourceMap;if(O?C.setAttribute("media",O):C.removeAttribute("media"),L&&btoa&&(T+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(L))))," */")),C.styleSheet)C.styleSheet.cssText=T;else{for(;C.firstChild;)C.removeChild(C.firstChild);C.appendChild(document.createTextNode(T))}}var P=null,I=0;function g(C,S){var j,T,O;if(S.singleton){var L=I++;j=P||(P=s(S)),T=f.bind(null,j,L,!1),O=f.bind(null,j,L,!0)}else j=s(S),T=p.bind(null,j,S),O=function(){!function(C){if(null===C.parentNode)return!1;C.parentNode.removeChild(C)}(j)};return T(C),function(S){if(S){if(S.css===C.css&&S.media===C.media&&S.sourceMap===C.sourceMap)return;T(C=S)}else O()}}C.exports=function(C,S){(S=S||{}).singleton||"boolean"==typeof S.singleton||(S.singleton=o());var j=c(C=C||[],S);return function(C){if(C=C||[],"[object Array]"===Object.prototype.toString.call(C)){for(var T=0;T<j.length;T++){var O=u(j[T]);L[O].references--}for(var M=c(C,S),F=0;F<j.length;F++){var P=u(j[F]);0===L[P].references&&(L[P].updater(),L.splice(P,1))}j=M}}}},function(C,S,j){(S=j(14)(!1)).push([C.i,'.image-tool {\n  --bg-color: #cdd1e0;\n  --front-color: #388ae5;\n  --border-color: #e8e8eb;\n\n}\n\n  .image-tool__image {\n    border-radius: 3px;\n    overflow: hidden;\n    margin-bottom: 10px;\n  }\n\n  .image-tool__image-picture {\n      max-width: 100%;\n      vertical-align: bottom;\n      display: block;\n    }\n\n  .image-tool__image-preloader {\n      width: 50px;\n      height: 50px;\n      border-radius: 50%;\n      background-size: cover;\n      margin: auto;\n      position: relative;\n      background-color: var(--bg-color);\n      background-position: center center;\n    }\n\n  .image-tool__image-preloader::after {\n        content: "";\n        position: absolute;\n        z-index: 3;\n        width: 60px;\n        height: 60px;\n        border-radius: 50%;\n        border: 2px solid var(--bg-color);\n        border-top-color: var(--front-color);\n        left: 50%;\n        top: 50%;\n        margin-top: -30px;\n        margin-left: -30px;\n        animation: image-preloader-spin 2s infinite linear;\n        box-sizing: border-box;\n      }\n\n  .image-tool__caption[contentEditable="true"][data-placeholder]::before {\n      position: absolute !important;\n      content: attr(data-placeholder);\n      color: #707684;\n      font-weight: normal;\n      display: none;\n    }\n\n  .image-tool__caption[contentEditable="true"][data-placeholder]:empty::before {\n        display: block;\n      }\n\n  .image-tool__caption[contentEditable="true"][data-placeholder]:empty:focus::before {\n        display: none;\n      }\n\n  .image-tool--empty .image-tool__image {\n      display: none;\n    }\n\n  .image-tool--empty .image-tool__caption, .image-tool--loading .image-tool__caption {\n      display: none;\n    }\n\n  .image-tool .cdx-button {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .image-tool .cdx-button svg {\n      height: auto;\n      margin: 0 6px 0 0;\n    }\n\n  .image-tool--filled .cdx-button {\n      display: none;\n    }\n\n  .image-tool--filled .image-tool__image-preloader {\n        display: none;\n      }\n\n  .image-tool--loading .image-tool__image {\n      min-height: 200px;\n      display: flex;\n      border: 1px solid var(--border-color);\n      background-color: #fff;\n    }\n\n  .image-tool--loading .image-tool__image-picture {\n        display: none;\n      }\n\n  .image-tool--loading .cdx-button {\n      display: none;\n    }\n\n  /**\n   * Tunes\n   * ----------------\n   */\n\n  .image-tool--withBorder .image-tool__image {\n      border: 1px solid var(--border-color);\n    }\n\n  .image-tool--withBackground .image-tool__image {\n      padding: 15px;\n      background: var(--bg-color);\n    }\n\n  .image-tool--withBackground .image-tool__image-picture {\n        max-width: 60%;\n        margin: 0 auto;\n      }\n\n  .image-tool--stretched .image-tool__image-picture {\n        width: 100%;\n      }\n\n@keyframes image-preloader-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n',""]),C.exports=S},function(S,j,T){S.exports=function(S){var j=[];return j.toString=function(){return this.map((function(C){var j=function(C,S){var j=C[1]||"",T=C[3];if(!T)return j;if(S&&"function"==typeof btoa){var O=(M=T,F=btoa(unescape(encodeURIComponent(JSON.stringify(M)))),P="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(F),"/*# ".concat(P," */")),L=T.sources.map((function(C){return"/*# sourceURL=".concat(T.sourceRoot||"").concat(C," */")}));return[j].concat(L).concat([O]).join("\n")}var M,F,P;return[j].join("\n")}(C,S);return C[2]?"@media ".concat(C[2]," {").concat(j,"}"):j})).join("")},j.i=function(S,T,O){"string"==typeof S&&(S=[[null,S,""]]);var L={};if(O)for(var M=0;M<(this||C).length;M++){var F=(this||C)[M][0];null!=F&&(L[F]=!0)}for(var P=0;P<S.length;P++){var I=[].concat(S[P]);O&&L[I[0]]||(T&&(I[2]?I[2]="".concat(T," and ").concat(I[2]):I[2]=T),j.push(I))}},j}},function(C,S,j){var T=j(4);C.exports=function(C){if(Array.isArray(C))return T(C)}},function(C,S){C.exports=function(C){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(C))return Array.from(C)}},function(C,S){C.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(C,S){C.exports=function(C){if(Array.isArray(C))return C}},function(C,S){C.exports=function(C,S){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(C)){var j=[],T=!0,O=!1,L=void 0;try{for(var M,F=C[Symbol.iterator]();!(T=(M=F.next()).done)&&(j.push(M.value),!S||j.length!==S);T=!0);}catch(C){O=!0,L=C}finally{try{T||null==F.return||F.return()}finally{if(O)throw L}}return j}}},function(C,S){C.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(S,j,T){T.r(j),T.d(j,"default",(function(){return X}));var O=T(3),L=T.n(O),M=T(6),F=T.n(M),P=T(2),I=T.n(P),R=T(0),N=T.n(R);T(11);const H='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.13968 15.32L8.69058 11.5661C9.02934 11.2036 9.48873 11 9.96774 11C10.4467 11 10.9061 11.2036 11.2449 11.5661L15.3871 16M13.5806 14.0664L15.0132 12.533C15.3519 12.1705 15.8113 11.9668 16.2903 11.9668C16.7693 11.9668 17.2287 12.1705 17.5675 12.533L18.841 13.9634"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.7778 9.33331H13.7867"/></svg>';var U=T(7),A=T.n(U);function h(C){var S,j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},O=document.createElement(C);Array.isArray(j)?(S=O.classList).add.apply(S,A()(j)):j&&O.classList.add(j);for(var L in T)O[L]=T[L];return O}var D=function(){function e(S){var j=S.api,T=S.config,O=S.onSelectFile,L=S.readOnly;I()(this||C,e),(this||C).api=j,(this||C).config=T,(this||C).onSelectFile=O,(this||C).readOnly=L,(this||C).nodes={wrapper:h("div",[(this||C).CSS.baseClass,(this||C).CSS.wrapper]),imageContainer:h("div",[(this||C).CSS.imageContainer]),fileButton:this.createFileButton(),imageEl:void 0,imagePreloader:h("div",(this||C).CSS.imagePreloader),caption:h("div",[(this||C).CSS.input,(this||C).CSS.caption],{contentEditable:!(this||C).readOnly})},(this||C).nodes.caption.dataset.placeholder=(this||C).config.captionPlaceholder,(this||C).nodes.imageContainer.appendChild((this||C).nodes.imagePreloader),(this||C).nodes.wrapper.appendChild((this||C).nodes.imageContainer),(this||C).nodes.wrapper.appendChild((this||C).nodes.caption),(this||C).nodes.wrapper.appendChild((this||C).nodes.fileButton)}return N()(e,[{key:"render",value:function(S){return S.file&&0!==Object.keys(S.file).length?this.toggleStatus(e.status.UPLOADING):this.toggleStatus(e.status.EMPTY),(this||C).nodes.wrapper}},{key:"createFileButton",value:function(){var S=this||C,j=h("div",[(this||C).CSS.button]);return j.innerHTML=(this||C).config.buttonContent||"".concat(H," ").concat((this||C).api.i18n.t("Select an Image")),j.addEventListener("click",(function(){S.onSelectFile()})),j}},{key:"showPreloader",value:function(S){(this||C).nodes.imagePreloader.style.backgroundImage="url(".concat(S,")"),this.toggleStatus(e.status.UPLOADING)}},{key:"hidePreloader",value:function(){(this||C).nodes.imagePreloader.style.backgroundImage="",this.toggleStatus(e.status.EMPTY)}},{key:"fillImage",value:function(S){var j=this||C,T=/\.mp4$/.test(S)?"VIDEO":"IMG",O={src:S},L="load";"VIDEO"===T&&(O.autoplay=!0,O.loop=!0,O.muted=!0,O.playsinline=!0,L="loadeddata"),(this||C).nodes.imageEl=h(T,(this||C).CSS.imageEl,O),(this||C).nodes.imageEl.addEventListener(L,(function(){j.toggleStatus(e.status.FILLED),j.nodes.imagePreloader&&(j.nodes.imagePreloader.style.backgroundImage="")})),(this||C).nodes.imageContainer.appendChild((this||C).nodes.imageEl)}},{key:"fillCaption",value:function(S){(this||C).nodes.caption&&((this||C).nodes.caption.innerHTML=S)}},{key:"toggleStatus",value:function(S){for(var j in e.status)Object.prototype.hasOwnProperty.call(e.status,j)&&(this||C).nodes.wrapper.classList.toggle("".concat((this||C).CSS.wrapper,"--").concat(e.status[j]),S===e.status[j])}},{key:"applyTune",value:function(S,j){(this||C).nodes.wrapper.classList.toggle("".concat((this||C).CSS.wrapper,"--").concat(S),j)}},{key:"CSS",get:function(){return{baseClass:(this||C).api.styles.block,loading:(this||C).api.styles.loader,input:(this||C).api.styles.input,button:(this||C).api.styles.button,wrapper:"image-tool",imageContainer:"image-tool__image",imagePreloader:"image-tool__image-preloader",imageEl:"image-tool__image-picture",caption:"image-tool__caption"}}}],[{key:"status",get:function(){return{EMPTY:"empty",UPLOADING:"loading",FILLED:"filled"}}}]),e}(),B=T(8),q=T.n(B),G=T(1),V=T.n(G);function w(C){return C&&"function"==typeof C.then}var J=function(){function e(S){var j=S.config,T=S.onUpload,O=S.onError;I()(this||C,e),(this||C).config=j,(this||C).onUpload=T,(this||C).onError=O}return N()(e,[{key:"uploadSelectedFile",value:function(S){var j=this||C,T=S.onPreview,r=function(C){var S=new FileReader;S.readAsDataURL(C),S.onload=function(C){T(C.target.result)}};((this||C).config.uploader&&"function"==typeof(this||C).config.uploader.uploadByFile?V.a.selectFiles({accept:(this||C).config.types}).then((function(C){r(C[0]);var S=j.config.uploader.uploadByFile(C[0]);return w(S)||console.warn("Custom uploader method uploadByFile should return a Promise"),S})):V.a.transport({url:(this||C).config.endpoints.byFile,data:(this||C).config.additionalRequestData,accept:(this||C).config.types,headers:(this||C).config.additionalRequestHeaders,beforeSend:function(C){r(C[0])},fieldName:(this||C).config.field}).then((function(C){return C.body}))).then((function(C){j.onUpload(C)})).catch((function(C){j.onError(C)}))}},{key:"uploadByUrl",value:function(S){var j,T=this||C;(this||C).config.uploader&&"function"==typeof(this||C).config.uploader.uploadByUrl?w(j=(this||C).config.uploader.uploadByUrl(S))||console.warn("Custom uploader method uploadByUrl should return a Promise"):j=V.a.post({url:(this||C).config.endpoints.byUrl,data:Object.assign({url:S},(this||C).config.additionalRequestData),type:V.a.contentType.JSON,headers:(this||C).config.additionalRequestHeaders}).then((function(C){return C.body})),j.then((function(C){T.onUpload(C)})).catch((function(C){T.onError(C)}))}},{key:"uploadByFile",value:function(S,j){var T,O=this||C,L=j.onPreview,M=new FileReader;if(M.readAsDataURL(S),M.onload=function(C){L(C.target.result)},(this||C).config.uploader&&"function"==typeof(this||C).config.uploader.uploadByFile)w(T=(this||C).config.uploader.uploadByFile(S))||console.warn("Custom uploader method uploadByFile should return a Promise");else{var F=new FormData;F.append((this||C).config.field,S),(this||C).config.additionalRequestData&&Object.keys((this||C).config.additionalRequestData).length&&Object.entries((this||C).config.additionalRequestData).forEach((function(C){var S=q()(C,2),j=S[0],T=S[1];F.append(j,T)})),T=V.a.post({url:(this||C).config.endpoints.byFile,data:F,type:V.a.contentType.JSON,headers:(this||C).config.additionalRequestHeaders}).then((function(C){return C.body}))}T.then((function(C){O.onUpload(C)})).catch((function(C){O.onError(C)}))}}]),e}(),X=function(){function e(S){var j=this||C,T=S.data,O=S.config,L=S.api,M=S.readOnly;I()(this||C,e),(this||C).api=L,(this||C).readOnly=M,(this||C).config={endpoints:O.endpoints||"",additionalRequestData:O.additionalRequestData||{},additionalRequestHeaders:O.additionalRequestHeaders||{},field:O.field||"image",types:O.types||"image/*",captionPlaceholder:(this||C).api.i18n.t(O.captionPlaceholder||"Caption"),buttonContent:O.buttonContent||"",uploader:O.uploader||void 0,actions:O.actions||[]},(this||C).uploader=new J({config:(this||C).config,onUpload:function(C){return j.onUpload(C)},onError:function(C){return j.uploadingFailed(C)}}),(this||C).ui=new D({api:L,config:(this||C).config,onSelectFile:function(){j.uploader.uploadSelectedFile({onPreview:function(C){j.ui.showPreloader(C)}})},readOnly:M}),(this||C)._data={},(this||C).data=T}var S;return N()(e,null,[{key:"isReadOnlySupported",get:function(){return!0}},{key:"toolbox",get:function(){return{icon:H,title:"Image"}}},{key:"tunes",get:function(){return[{name:"withBorder",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 9.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.5 5H14.5096"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.625 5H15C17.2091 5 19 6.79086 19 9V9.375"/><path stroke="currentColor" stroke-width="2" d="M9.375 5L9 5C6.79086 5 5 6.79086 5 9V9.375"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 5H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 9.5H5.00957"/><path stroke="currentColor" stroke-width="2" d="M9.375 19H9C6.79086 19 5 17.2091 5 15V14.625"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 19H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 14.55H5.00957"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/></svg>',title:"With border",toggle:!0},{name:"stretched",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L20 12L17 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 12H20"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L4 12L7 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12H10"/></svg>',title:"Stretch image",toggle:!0},{name:"withBackground",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19V19C9.13623 19 8.20435 19 7.46927 18.6955C6.48915 18.2895 5.71046 17.5108 5.30448 16.5307C5 15.7956 5 14.8638 5 13V12C5 9.19108 5 7.78661 5.67412 6.77772C5.96596 6.34096 6.34096 5.96596 6.77772 5.67412C7.78661 5 9.19108 5 12 5H13.5C14.8956 5 15.5933 5 16.1611 5.17224C17.4395 5.56004 18.44 6.56046 18.8278 7.83886C19 8.40666 19 9.10444 19 10.5V10.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.5 17.5L17.5 6.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 10.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.9919 19H11.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13L13 5"/></svg>',title:"With background",toggle:!0}]}}]),N()(e,[{key:"render",value:function(){return(this||C).ui.render((this||C).data)}},{key:"validate",value:function(C){return C.file&&C.file.url}},{key:"save",value:function(){var S=(this||C).ui.nodes.caption;return(this||C)._data.caption=S.innerHTML,(this||C).data}},{key:"renderSettings",value:function(){var S=this||C;return e.tunes.concat((this||C).config.actions).map((function(C){return{icon:C.icon,label:S.api.i18n.t(C.title),name:C.name,toggle:C.toggle,isActive:S.data[C.name],onActivate:function(){"function"!=typeof C.action?S.tuneToggled(C.name):C.action(C.name)}}}))}},{key:"appendCallback",value:function(){(this||C).ui.nodes.fileButton.click()}},{key:"onPaste",value:(S=F()(L.a.mark((function e(S){var j,T,O,M,F;return L.a.wrap((function(C){for(;;)switch(C.prev=C.next){case 0:C.t0=S.type,C.next="tag"===C.t0?3:"pattern"===C.t0?15:"file"===C.t0?18:21;break;case 3:if(j=S.detail.data,!/^blob:/.test(j.src)){C.next=13;break}return C.next=7,fetch(j.src);case 7:return T=C.sent,C.next=10,T.blob();case 10:return O=C.sent,this.uploadFile(O),C.abrupt("break",21);case 13:return this.uploadUrl(j.src),C.abrupt("break",21);case 15:return M=S.detail.data,this.uploadUrl(M),C.abrupt("break",21);case 18:return F=S.detail.file,this.uploadFile(F),C.abrupt("break",21);case 21:case"end":return C.stop()}}),e,this||C)}))),function(j){return S.apply(this||C,arguments)})},{key:"onUpload",value:function(S){S.success&&S.file?(this||C).image=S.file:this.uploadingFailed("incorrect response: "+JSON.stringify(S))}},{key:"uploadingFailed",value:function(S){console.log("Image Tool: uploading failed because of",S),(this||C).api.notifier.show({message:(this||C).api.i18n.t("Couldn’t upload image. Please try another."),style:"error"}),(this||C).ui.hidePreloader()}},{key:"tuneToggled",value:function(S){this.setTune(S,!(this||C)._data[S])}},{key:"setTune",value:function(S,j){var T=this||C;(this||C)._data[S]=j,(this||C).ui.applyTune(S,j),"stretched"===S&&Promise.resolve().then((function(){var C=T.api.blocks.getCurrentBlockIndex();T.api.blocks.stretchBlock(C,j)})).catch((function(C){console.error(C)}))}},{key:"uploadFile",value:function(S){var j=this||C;(this||C).uploader.uploadByFile(S,{onPreview:function(C){j.ui.showPreloader(C)}})}},{key:"uploadUrl",value:function(S){(this||C).ui.showPreloader(S),(this||C).uploader.uploadByUrl(S)}},{key:"data",set:function(S){var j=this||C;(this||C).image=S.file,(this||C)._data.caption=S.caption||"",(this||C).ui.fillCaption((this||C)._data.caption),e.tunes.forEach((function(C){var T=C.name,O=void 0!==S[T]&&(!0===S[T]||"true"===S[T]);j.setTune(T,O)}))},get:function(){return(this||C)._data}},{key:"image",set:function(S){(this||C)._data.file=S||{},S&&S.url&&(this||C).ui.fillImage(S.url)}}],[{key:"pasteConfig",get:function(){return{tags:[{img:{src:!0}}],patterns:{image:/https?:\/\/\S+\.(gif|jpe?g|tiff|png|svg|webp)(\?[a-z0-9=]*)?$/i},files:{mimeTypes:["image/*"]}}}}]),e}();
/**
     * Image Tool for the Editor.js
     *
     * @author CodeX <team@codex.so>
     * @license MIT
     * @see {@link https://github.com/editor-js/image}
     *
     * To developers.
     * To simplify Tool structure, we split it to 4 parts:
     *  1) index.js — main Tool's interface, public API and methods for working with data
     *  2) uploader.js — module that has methods for sending files via AJAX: from device, by URL or File pasting
     *  3) ui.js — module for UI manipulations: render, showing preloader, etc
     *  4) tunes.js — working with Block Tunes: render buttons, handle clicks
     *
     * For debug purposes there is a testing server
     * that can save uploaded files and return a Response {@link UploadResponseFormat}
     *
     *       $ node dev/server.js
     *
     * It will expose 8008 port, so you can pass http://localhost:8008 with the Tools config:
     *
     * image: {
     *   class: ImageTool,
     *   config: {
     *     endpoints: {
     *       byFile: 'http://localhost:8008/uploadFile',
     *       byUrl: 'http://localhost:8008/fetchUrl',
     *     }
     *   },
     * },
     */}]).default}));var j=S;const T=S.ImageTool;export{T as ImageTool,j as default};

