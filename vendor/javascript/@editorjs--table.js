var t="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var e={};!function(t,c){e=c()}(window,(function(){return function(t){var e={};function o(c){if(e[c])return e[c].exports;var d=e[c]={i:c,l:!1,exports:{}};return t[c].call(d.exports,d,d.exports,o),d.l=!0,d.exports}return o.m=t,o.c=e,o.d=function(t,e,c){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:c})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var d in t)o.d(c,d,function(e){return t[e]}.bind(null,d));return c},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=6)}([function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"><rect width="18" height="18" fill="#F4F5F7" rx="2"></rect><circle cx="11.5" cy="6.5" r="1.5"></circle><circle cx="11.5" cy="11.5" r="1.5"></circle><circle cx="6.5" cy="6.5" r="1.5"></circle><circle cx="6.5" cy="11.5" r="1.5"></circle></svg>'},function(t,e,c){var d=c(2);"string"==typeof d&&(d=[[t.i,d,""]]);var p={hmr:!0,transform:void 0,insertInto:void 0};c(4)(d,p);d.locals&&(t.exports=d.locals)},function(t,e,c){(t.exports=c(3)(!1)).push([t.i,'.tc-wrap{--color-background:#f9f9fb;--color-text-secondary:#7b7e89;--color-border:#e8e8eb;--cell-size:34px;--toolbox-icon-size:18px;--toolbox-padding:6px;--toolbox-aiming-field-size:calc(var(--toolbox-icon-size) + var(--toolbox-padding)*2);border-left:0;position:relative;height:100%;width:100%;margin-top:var(--toolbox-icon-size);box-sizing:border-box;display:grid;grid-template-columns:calc(100% - var(--cell-size)) var(--cell-size);}.tc-wrap--readonly{grid-template-columns:100% var(--cell-size)}.tc-wrap svg{vertical-align:top}@media print{.tc-wrap{border-left-color:var(--color-border);border-left-style:solid;border-left-width:1px;grid-template-columns:100% var(--cell-size)}}@media print{.tc-wrap .tc-row:after{display:none}}.tc-table{position:relative;width:100%;height:100%;display:grid;font-size:14px;border-top:1px solid var(--color-border);line-height:1.4;}.tc-table:after{width:calc(var(--cell-size));height:100%;left:calc(var(--cell-size)*-1);top:0}.tc-table:after,.tc-table:before{position:absolute;content:""}.tc-table:before{width:100%;height:var(--toolbox-aiming-field-size);top:calc(var(--toolbox-aiming-field-size)*-1);left:0}.tc-table--heading .tc-row:first-child{font-weight:600;border-bottom:2px solid var(--color-border);}.tc-table--heading .tc-row:first-child [contenteditable]:empty:before{content:attr(heading);color:var(--color-text-secondary)}.tc-table--heading .tc-row:first-child:after{bottom:-2px;border-bottom:2px solid var(--color-border)}.tc-add-column,.tc-add-row{display:flex;color:var(--color-text-secondary)}@media print{.tc-add{display:none}}.tc-add-column{padding:4px 0;justify-content:center;border-top:1px solid var(--color-border);}@media print{.tc-add-column{display:none}}.tc-add-row{height:var(--cell-size);align-items:center;padding-left:4px;position:relative;}.tc-add-row:before{content:"";position:absolute;right:calc(var(--cell-size)*-1);width:var(--cell-size);height:100%}@media print{.tc-add-row{display:none}}.tc-add-column,.tc-add-row{transition:0s;cursor:pointer;will-change:background-color;}.tc-add-column:hover,.tc-add-row:hover{transition:background-color .1s ease;background-color:var(--color-background)}.tc-add-row{margin-top:1px;}.tc-add-row:hover:before{transition:.1s;background-color:var(--color-background)}.tc-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(10px,1fr));position:relative;border-bottom:1px solid var(--color-border);}.tc-row:after{content:"";pointer-events:none;position:absolute;width:var(--cell-size);height:100%;bottom:-1px;right:calc(var(--cell-size)*-1);border-bottom:1px solid var(--color-border)}.tc-row--selected{background:var(--color-background)}.tc-row--selected:after{background:var(--color-background)}.tc-cell{border-right:1px solid var(--color-border);padding:6px 12px;overflow:hidden;outline:none;line-break:normal;}.tc-cell--selected{background:var(--color-background)}.tc-wrap--readonly .tc-row:after{display:none}.tc-toolbox{--toolbox-padding:6px;--popover-margin:30px;--toggler-click-zone-size:30px;--toggler-dots-color:#7b7e89;--toggler-dots-color-hovered:#1d202b;position:absolute;cursor:pointer;z-index:1;opacity:0;transition:opacity .1s;will-change:left,opacity;}.tc-toolbox--column{top:calc(var(--toggler-click-zone-size)*-1);transform:translateX(calc(var(--toggler-click-zone-size)*-1/2));will-change:left,opacity}.tc-toolbox--row{left:calc(var(--popover-margin)*-1);transform:translateY(calc(var(--toggler-click-zone-size)*-1/2));margin-top:-1px;will-change:top,opacity}.tc-toolbox--showed{opacity:1}.tc-toolbox .tc-popover{position:absolute;top:0;left:var(--popover-margin)}.tc-toolbox__toggler{display:flex;align-items:center;justify-content:center;width:var(--toggler-click-zone-size);height:var(--toggler-click-zone-size);color:var(--toggler-dots-color);opacity:0;transition:opacity .15s ease;will-change:opacity;}.tc-toolbox__toggler:hover{color:var(--toggler-dots-color-hovered)}.tc-toolbox__toggler svg{fill:currentColor}.tc-wrap:hover .tc-toolbox__toggler{opacity:1}.tc-settings .cdx-settings-button{width:50%;margin:0}.tc-popover{--color-border:#eaeaea;--color-background:#fff;--color-background-hover:rgba(232,232,235,0.49);--color-background-confirm:#e24a4a;--color-background-confirm-hover:#d54040;--color-text-confirm:#fff;background:var(--color-background);border:1px solid var(--color-border);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:6px;padding:6px;display:none;will-change:opacity,transform;}.tc-popover--opened{display:block;animation:menuShowing .1s cubic-bezier(.215,.61,.355,1) forwards}.tc-popover__item{display:flex;align-items:center;padding:2px 14px 2px 2px;border-radius:5px;cursor:pointer;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;user-select:none;}.tc-popover__item:hover{background:var(--color-background-hover)}.tc-popover__item:not(:last-of-type){margin-bottom:2px}.tc-popover__item-icon{display:inline-flex;width:26px;height:26px;align-items:center;justify-content:center;background:var(--color-background);border-radius:5px;border:1px solid var(--color-border);margin-right:8px}.tc-popover__item-label{line-height:22px;font-size:14px;font-weight:500}.tc-popover__item--confirm{background:var(--color-background-confirm);color:var(--color-text-confirm);}.tc-popover__item--confirm:hover{background-color:var(--color-background-confirm-hover)}.tc-popover__item--confirm .tc-popover__item-icon{background:var(--color-background-confirm);border-color:rgba(0,0,0,.1);}.tc-popover__item--confirm .tc-popover__item-icon svg{transition:transform .2s ease-in;transform:rotate(90deg) scale(1.2)}.tc-popover__item--hidden{display:none}@keyframes menuShowing{0%{opacity:0;transform:translateY(-8px) scale(.9)}70%{opacity:1;transform:translateY(2px)}to{transform:translateY(0)}}',""])},function(e,c){e.exports=function(e){var c=[];return c.toString=function(){return this.map((function(t){var c=function(t,e){var c=t[1]||"",d=t[3];if(!d)return c;if(e&&"function"==typeof btoa){var p=(C=d,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(C))))+" */"),x=d.sources.map((function(t){return"/*# sourceURL="+d.sourceRoot+t+" */"}));return[c].concat(x).concat([p]).join("\n")}var C;return[c].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+c+"}":c})).join("")},c.i=function(e,d){"string"==typeof e&&(e=[[null,e,""]]);for(var p={},x=0;x<(this||t).length;x++){var C=(this||t)[x][0];"number"==typeof C&&(p[C]=!0)}for(x=0;x<e.length;x++){var S=e[x];"number"==typeof S[0]&&p[S[0]]||(d&&!S[2]?S[2]=d:d&&(S[2]="("+S[2]+") and ("+d+")"),c.push(S))}},c}},function(e,c,d){var p,x,C={},S=(p=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===x&&(x=p.apply(this||t,arguments)),x}),l=function(t,e){return e?e.querySelector(t):document.querySelector(t)},L=function(e){var c={};return function(e,d){if("function"==typeof e)return e();if(void 0===c[e]){var p=l.call(this||t,e,d);if(window.HTMLIFrameElement&&p instanceof window.HTMLIFrameElement)try{p=p.contentDocument.head}catch(e){p=null}c[e]=p}return c[e]}}(),T=null,O=0,M=[],A=d(5);function u(t,e){for(var c=0;c<t.length;c++){var d=t[c],p=C[d.id];if(p){p.refs++;for(var x=0;x<p.parts.length;x++)p.parts[x](d.parts[x]);for(;x<d.parts.length;x++)p.parts.push(v(d.parts[x],e))}else{var S=[];for(x=0;x<d.parts.length;x++)S.push(v(d.parts[x],e));C[d.id]={id:d.id,refs:1,parts:S}}}}function f(t,e){for(var c=[],d={},p=0;p<t.length;p++){var x=t[p],C=e.base?x[0]+e.base:x[0],S={css:x[1],media:x[2],sourceMap:x[3]};d[C]?d[C].parts.push(S):c.push(d[C]={id:C,parts:[S]})}return c}function g(t,e){var c=L(t.insertInto);if(!c)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var d=M[M.length-1];if("top"===t.insertAt)d?d.nextSibling?c.insertBefore(e,d.nextSibling):c.appendChild(e):c.insertBefore(e,c.firstChild),M.push(e);else if("bottom"===t.insertAt)c.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var p=L(t.insertAt.before,c);c.insertBefore(e,p)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=M.indexOf(t);e>=0&&M.splice(e,1)}function w(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var c=function(){0;return d.nc}();c&&(t.attrs.nonce=c)}return b(e,t.attrs),g(t,e),e}function b(t,e){Object.keys(e).forEach((function(c){t.setAttribute(c,e[c])}))}function v(t,e){var c,d,p,x;if(e.transform&&t.css){if(!(x="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=x}if(e.singleton){var C=O++;c=T||(T=w(e)),d=y.bind(null,c,C,!1),p=y.bind(null,c,C,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(c=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",b(e,t.attrs),g(t,e),e}(e),d=R.bind(null,c,e),p=function(){m(c),c.href&&URL.revokeObjectURL(c.href)}):(c=w(e),d=k.bind(null,c),p=function(){m(c)});return d(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;d(t=e)}else p()}}e.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=S()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var c=f(t,e);return u(c,e),function(t){for(var d=[],p=0;p<c.length;p++){var x=c[p];(S=C[x.id]).refs--,d.push(S)}t&&u(f(t,e),e);for(p=0;p<d.length;p++){var S;if(0===(S=d[p]).refs){for(var L=0;L<S.parts.length;L++)S.parts[L]();delete C[S.id]}}}};var H,_=(H=[],function(t,e){return H[t]=e,H.filter(Boolean).join("\n")});function y(t,e,c,d){var p=c?"":d.css;if(t.styleSheet)t.styleSheet.cssText=_(e,p);else{var x=document.createTextNode(p),C=t.childNodes;C[e]&&t.removeChild(C[e]),C.length?t.insertBefore(x,C[e]):t.appendChild(x)}}function k(t,e){var c=e.css,d=e.media;if(d&&t.setAttribute("media",d),t.styleSheet)t.styleSheet.cssText=c;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(c))}}function R(t,e,c){var d=c.css,p=c.sourceMap,x=void 0===e.convertToAbsoluteUrls&&p;(e.convertToAbsoluteUrls||x)&&(d=A(d)),p&&(d+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(p))))+" */");var C=new Blob([d],{type:"text/css"}),S=t.href;t.href=URL.createObjectURL(C),S&&URL.revokeObjectURL(S)}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var c=e.protocol+"//"+e.host,d=c+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var p,x=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(x)?t:(p=0===x.indexOf("//")?x:0===x.indexOf("/")?c+x:d+x.replace(/^\.\//,""),"url("+JSON.stringify(p)+")")}))}},function(t,e,c){function r(t,e,c={}){const d=document.createElement(t);Array.isArray(e)?d.classList.add(...e):e&&d.classList.add(e);for(const t in c)Object.prototype.hasOwnProperty.call(c,t)&&(d[t]=c[t]);return d}function i(t){const e=t.getBoundingClientRect();return{y1:Math.floor(e.top+window.pageYOffset),x1:Math.floor(e.left+window.pageXOffset),x2:Math.floor(e.right+window.pageXOffset),y2:Math.floor(e.bottom+window.pageYOffset)}}function n(t,e){const c=i(t),d=i(e);return{fromTopBorder:d.y1-c.y1,fromLeftBorder:d.x1-c.x1,fromRightBorder:c.x2-d.x2,fromBottomBorder:c.y2-d.y2}}function s(t,e){return e.parentNode.insertBefore(t,e)}function l(t,e=!0){const c=document.createRange(),d=window.getSelection();c.selectNodeContents(t),c.collapse(e),d.removeAllRanges(),d.addRange(c)}c.r(e);class a{constructor({items:t}){this.items=t,this.wrapper=void 0,this.itemEls=[]}static get CSS(){return{popover:"tc-popover",popoverOpened:"tc-popover--opened",item:"tc-popover__item",itemHidden:"tc-popover__item--hidden",itemConfirmState:"tc-popover__item--confirm",itemIcon:"tc-popover__item-icon",itemLabel:"tc-popover__item-label"}}render(){return this.wrapper=r("div",a.CSS.popover),this.items.forEach(((t,e)=>{const c=r("div",a.CSS.item),d=r("div",a.CSS.itemIcon,{innerHTML:t.icon}),p=r("div",a.CSS.itemLabel,{textContent:t.label});c.dataset.index=e,c.appendChild(d),c.appendChild(p),this.wrapper.appendChild(c),this.itemEls.push(c)})),this.wrapper.addEventListener("click",(t=>{this.popoverClicked(t)})),this.wrapper}popoverClicked(t){const e=t.target.closest("."+a.CSS.item);if(!e)return;const c=e.dataset.index,d=this.items[c];!d.confirmationRequired||this.hasConfirmationState(e)?d.onClick():this.setConfirmationState(e)}setConfirmationState(t){t.classList.add(a.CSS.itemConfirmState)}clearConfirmationState(t){t.classList.remove(a.CSS.itemConfirmState)}hasConfirmationState(t){return t.classList.contains(a.CSS.itemConfirmState)}get opened(){return this.wrapper.classList.contains(a.CSS.popoverOpened)}open(){this.items.forEach(((t,e)=>{"function"==typeof t.hideIf&&this.itemEls[e].classList.toggle(a.CSS.itemHidden,t.hideIf())})),this.wrapper.classList.add(a.CSS.popoverOpened)}close(){this.wrapper.classList.remove(a.CSS.popoverOpened),this.itemEls.forEach((t=>{this.clearConfirmationState(t)}))}}var d=c(0),p=c.n(d);class h{constructor({api:t,items:e,onOpen:c,onClose:d,cssModifier:p=""}){this.api=t,this.items=e,this.onOpen=c,this.onClose=d,this.cssModifier=p,this.popover=null,this.wrapper=this.createToolbox()}static get CSS(){return{toolbox:"tc-toolbox",toolboxShowed:"tc-toolbox--showed",toggler:"tc-toolbox__toggler"}}get element(){return this.wrapper}createToolbox(){const t=r("div",[h.CSS.toolbox,this.cssModifier?`${h.CSS.toolbox}--${this.cssModifier}`:""]);t.dataset.mutationFree="true";const e=this.createPopover(),c=this.createToggler();return t.appendChild(c),t.appendChild(e),t}createToggler(){const t=r("div",h.CSS.toggler,{innerHTML:p.a});return t.addEventListener("click",(()=>{this.togglerClicked()})),t}createPopover(){return this.popover=new a({items:this.items}),this.popover.render()}togglerClicked(){this.popover.opened?(this.popover.close(),this.onClose()):(this.popover.open(),this.onOpen())}show(t){const e=t();Object.entries(e).forEach((([t,e])=>{this.wrapper.style[t]=e})),this.wrapper.classList.add(h.CSS.toolboxShowed)}hide(){this.popover.close(),this.wrapper.classList.remove(h.CSS.toolboxShowed)}}const x='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',C='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',S="tc-wrap",L="tc-wrap--readonly",T="tc-table",O="tc-row",M="tc-table--heading",A="tc-row--selected",H="tc-cell",_="tc-cell--selected",z="tc-add-row",E="tc-add-column";class R{constructor(t,e,c,d){this.readOnly=t,this.api=e,this.data=c,this.config=d,this.wrapper=null,this.table=null,this.toolboxColumn=this.createColumnToolbox(),this.toolboxRow=this.createRowToolbox(),this.createTableWrapper(),this.hoveredRow=0,this.hoveredColumn=0,this.selectedRow=0,this.selectedColumn=0,this.tunes={withHeadings:!1},this.resize(),this.fill(),this.focusedCell={row:0,column:0},this.documentClicked=t=>{const e=null!==t.target.closest("."+T),c=null===t.target.closest("."+S);(e||c)&&this.hideToolboxes();const d=t.target.closest("."+z),p=t.target.closest("."+E);d&&d.parentNode===this.wrapper?(this.addRow(void 0,!0),this.hideToolboxes()):p&&p.parentNode===this.wrapper&&(this.addColumn(void 0,!0),this.hideToolboxes())},this.readOnly||this.bindEvents()}getWrapper(){return this.wrapper}bindEvents(){document.addEventListener("click",this.documentClicked),this.table.addEventListener("mousemove",function(t,e){let c=0;return function(...d){const p=(new Date).getTime();if(!(p-c<t))return c=p,e(...d)}}(150,(t=>this.onMouseMoveInTable(t))),{passive:!0}),this.table.onkeypress=t=>this.onKeyPressListener(t),this.table.addEventListener("keydown",(t=>this.onKeyDownListener(t))),this.table.addEventListener("focusin",(t=>this.focusInTableListener(t)))}createColumnToolbox(){return new h({api:this.api,cssModifier:"column",items:[{label:this.api.i18n.t("Add column to left"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.9167 14.9167L11.5833 18.25M11.5833 18.25L8.25 14.9167M11.5833 18.25L11.5833 10.0833C11.5833 9.19928 11.9345 8.35143 12.5596 7.72631C13.1848 7.10119 14.0326 6.75 14.9167 6.75"/></svg>',onClick:()=>{this.addColumn(this.selectedColumn,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add column to right"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.13333 14.9167L12.4667 18.25M12.4667 18.25L15.8 14.9167M12.4667 18.25L12.4667 10.0833C12.4667 9.19928 12.1155 8.35143 11.4904 7.72631C10.8652 7.10119 10.0174 6.75 9.13333 6.75"/></svg>',onClick:()=>{this.addColumn(this.selectedColumn+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Delete column"),icon:x,hideIf:()=>1===this.numberOfColumns,confirmationRequired:!0,onClick:()=>{this.deleteColumn(this.selectedColumn),this.hideToolboxes()}}],onOpen:()=>{this.selectColumn(this.hoveredColumn),this.hideRowToolbox()},onClose:()=>{this.unselectColumn()}})}createRowToolbox(){return new h({api:this.api,cssModifier:"row",items:[{label:this.api.i18n.t("Add row above"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 15.8333L18.2167 12.5M18.2167 12.5L14.8833 9.16667M18.2167 12.5L10.05 12.5C9.16595 12.5 8.31811 12.8512 7.69299 13.4763C7.06787 14.1014 6.71667 14.9493 6.71667 15.8333"/></svg>',onClick:()=>{this.addRow(this.selectedRow,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add row below"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 9.16666L18.2167 12.5M18.2167 12.5L14.8833 15.8333M18.2167 12.5H10.05C9.16594 12.5 8.31809 12.1488 7.69297 11.5237C7.06785 10.8986 6.71666 10.0507 6.71666 9.16666"/></svg>',onClick:()=>{this.addRow(this.selectedRow+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Delete row"),icon:x,hideIf:()=>1===this.numberOfRows,confirmationRequired:!0,onClick:()=>{this.deleteRow(this.selectedRow),this.hideToolboxes()}}],onOpen:()=>{this.selectRow(this.hoveredRow),this.hideColumnToolbox()},onClose:()=>{this.unselectRow()}})}moveCursorToNextRow(){this.focusedCell.row!==this.numberOfRows?(this.focusedCell.row+=1,this.focusCell(this.focusedCell)):(this.addRow(),this.focusedCell.row+=1,this.focusCell(this.focusedCell),this.updateToolboxesPosition(0,0))}getCell(t,e){return this.table.querySelectorAll(`.${O}:nth-child(${t}) .${H}`)[e-1]}getRow(t){return this.table.querySelector(`.${O}:nth-child(${t})`)}getRowByCell(t){return t.parentElement}getRowFirstCell(t){return t.querySelector(`.${H}:first-child`)}setCellContent(t,e,c){this.getCell(t,e).innerHTML=c}addColumn(t=-1,e=!1){let c=this.numberOfColumns;for(let d=1;d<=this.numberOfRows;d++){let p;const x=this.createCell();if(t>0&&t<=c?(p=this.getCell(d,t),s(x,p)):p=this.getRow(d).appendChild(x),1===d){const p=this.getCell(d,t>0?t:c+1);p&&e&&l(p)}}this.addHeadingAttrToFirstRow()}addRow(t=-1,e=!1){let c,d=r("div",O);this.tunes.withHeadings&&this.removeHeadingAttrFromFirstRow();let p=this.numberOfColumns;c=t>0&&t<=this.numberOfRows?s(d,this.getRow(t)):this.table.appendChild(d);this.fillRow(c,p),this.tunes.withHeadings&&this.addHeadingAttrToFirstRow();const x=this.getRowFirstCell(c);return x&&e&&l(x),c}deleteColumn(t){for(let e=1;e<=this.numberOfRows;e++){const c=this.getCell(e,t);if(!c)return;c.remove()}}deleteRow(t){this.getRow(t).remove(),this.addHeadingAttrToFirstRow()}createTableWrapper(){if(this.wrapper=r("div",S),this.table=r("div",T),this.readOnly&&this.wrapper.classList.add(L),this.wrapper.appendChild(this.toolboxRow.element),this.wrapper.appendChild(this.toolboxColumn.element),this.wrapper.appendChild(this.table),!this.readOnly){const t=r("div",E,{innerHTML:C}),e=r("div",z,{innerHTML:C});this.wrapper.appendChild(t),this.wrapper.appendChild(e)}}computeInitialSize(){const t=this.data&&this.data.content,e=Array.isArray(t),c=!!e&&t.length,d=e?t.length:void 0,p=c?t[0].length:void 0,x=Number.parseInt(this.config&&this.config.rows),C=Number.parseInt(this.config&&this.config.cols),S=!isNaN(x)&&x>0?x:void 0,L=!isNaN(C)&&C>0?C:void 0;return{rows:d||S||2,cols:p||L||2}}resize(){const{rows:t,cols:e}=this.computeInitialSize();for(let e=0;e<t;e++)this.addRow();for(let t=0;t<e;t++)this.addColumn()}fill(){const t=this.data;if(t&&t.content)for(let e=0;e<t.content.length;e++)for(let c=0;c<t.content[e].length;c++)this.setCellContent(e+1,c+1,t.content[e][c])}fillRow(t,e){for(let c=1;c<=e;c++){const e=this.createCell();t.appendChild(e)}}createCell(){return r("div",H,{contentEditable:!this.readOnly})}get numberOfRows(){return this.table.childElementCount}get numberOfColumns(){return this.numberOfRows?this.table.querySelectorAll(`.${O}:first-child .${H}`).length:0}get isColumnMenuShowing(){return 0!==this.selectedColumn}get isRowMenuShowing(){return 0!==this.selectedRow}onMouseMoveInTable(t){const{row:e,column:c}=this.getHoveredCell(t);this.hoveredColumn=c,this.hoveredRow=e,this.updateToolboxesPosition()}onKeyPressListener(t){if("Enter"===t.key){if(t.shiftKey)return!0;this.moveCursorToNextRow()}return"Enter"!==t.key}onKeyDownListener(t){"Tab"===t.key&&t.stopPropagation()}focusInTableListener(t){const e=t.target,c=this.getRowByCell(e);this.focusedCell={row:Array.from(this.table.querySelectorAll("."+O)).indexOf(c)+1,column:Array.from(c.querySelectorAll("."+H)).indexOf(e)+1}}hideToolboxes(){this.hideRowToolbox(),this.hideColumnToolbox(),this.updateToolboxesPosition()}hideRowToolbox(){this.unselectRow(),this.toolboxRow.hide()}hideColumnToolbox(){this.unselectColumn(),this.toolboxColumn.hide()}focusCell(){this.focusedCellElem.focus()}get focusedCellElem(){const{row:t,column:e}=this.focusedCell;return this.getCell(t,e)}updateToolboxesPosition(t=this.hoveredRow,e=this.hoveredColumn){this.isColumnMenuShowing||e>0&&e<=this.numberOfColumns&&this.toolboxColumn.show((()=>({left:`calc((100% - var(--cell-size)) / (${this.numberOfColumns} * 2) * (1 + (${e} - 1) * 2))`}))),this.isRowMenuShowing||t>0&&t<=this.numberOfRows&&this.toolboxRow.show((()=>{const e=this.getRow(t),{fromTopBorder:c}=n(this.table,e),{height:d}=e.getBoundingClientRect();return{top:Math.ceil(c+d/2)+"px"}}))}setHeadingsSetting(t){this.tunes.withHeadings=t,t?(this.table.classList.add(M),this.addHeadingAttrToFirstRow()):(this.table.classList.remove(M),this.removeHeadingAttrFromFirstRow())}addHeadingAttrToFirstRow(){for(let t=1;t<=this.numberOfColumns;t++){let e=this.getCell(1,t);e&&e.setAttribute("heading",this.api.i18n.t("Heading"))}}removeHeadingAttrFromFirstRow(){for(let t=1;t<=this.numberOfColumns;t++){let e=this.getCell(1,t);e&&e.removeAttribute("heading")}}selectRow(t){const e=this.getRow(t);e&&(this.selectedRow=t,e.classList.add(A))}unselectRow(){if(this.selectedRow<=0)return;const t=this.table.querySelector("."+A);t&&t.classList.remove(A),this.selectedRow=0}selectColumn(t){for(let e=1;e<=this.numberOfRows;e++){const c=this.getCell(e,t);c&&c.classList.add(_)}this.selectedColumn=t}unselectColumn(){if(this.selectedColumn<=0)return;let t=this.table.querySelectorAll("."+_);Array.from(t).forEach((t=>{t.classList.remove(_)})),this.selectedColumn=0}getHoveredCell(t){let e=this.hoveredRow,c=this.hoveredColumn;const{width:d,height:p,x:x,y:C}=function(t,e){const c=t.getBoundingClientRect(),{width:d,height:p,x:x,y:C}=c,{clientX:S,clientY:L}=e;return{width:d,height:p,x:S-x,y:L-C}}(this.table,t);return x>=0&&(c=this.binSearch(this.numberOfColumns,(t=>this.getCell(1,t)),(({fromLeftBorder:t})=>x<t),(({fromRightBorder:t})=>x>d-t))),C>=0&&(e=this.binSearch(this.numberOfRows,(t=>this.getCell(t,1)),(({fromTopBorder:t})=>C<t),(({fromBottomBorder:t})=>C>p-t))),{row:e||this.hoveredRow,column:c||this.hoveredColumn}}binSearch(t,e,c,d){let p,x=0,C=t+1,S=0;for(;x<C-1&&S<10;){p=Math.ceil((x+C)/2);const t=e(p),L=n(this.table,t);if(c(L))C=p;else{if(!d(L))break;x=p}S++}return p}getData(){const t=[];for(let e=1;e<=this.numberOfRows;e++){const c=this.table.querySelector(`.${O}:nth-child(${e})`),d=Array.from(c.querySelectorAll("."+H));d.every((t=>!t.textContent.trim()))||t.push(d.map((t=>t.innerHTML)))}return t}destroy(){document.removeEventListener("click",this.documentClicked)}}c(1),e.default=class{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}constructor({data:t,config:e,api:c,readOnly:d}){this.api=c,this.readOnly=d,this.config=e,this.data={withHeadings:this.getConfig("withHeadings",!1,t),content:t&&t.content?t.content:[]},this.table=null}static get toolbox(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',title:"Table"}}render(){return this.table=new R(this.readOnly,this.api,this.data,this.config),this.container=r("div",this.api.styles.block),this.container.appendChild(this.table.getWrapper()),this.table.setHeadingsSetting(this.data.withHeadings),this.container}renderSettings(){return[{label:this.api.i18n.t("With headings"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',isActive:this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!0,this.table.setHeadingsSetting(this.data.withHeadings)}},{label:this.api.i18n.t("Without headings"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M14 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><path stroke="currentColor" stroke-width="2" d="M5 14H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',isActive:!this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!1,this.table.setHeadingsSetting(this.data.withHeadings)}}]}save(){const t=this.table.getData();return{withHeadings:this.data.withHeadings,content:t}}destroy(){this.table.destroy()}getConfig(t,e,c){const d=this.data||c;return d?d[t]?d[t]:e:this.config&&this.config[t]?this.config[t]:e}static get pasteConfig(){return{tags:["TABLE","TR","TH","TD"]}}onPaste(t){const e=t.detail.data,c=e.querySelector(":scope > thead, tr:first-of-type th"),d=Array.from(e.querySelectorAll("tr")).map((t=>Array.from(t.querySelectorAll("th, td")).map((t=>t.innerHTML))));this.data={withHeadings:null!==c,content:d},this.table.wrapper&&this.table.wrapper.replaceWith(this.render())}}}]).default}));var c=e;const d=e.Table;export{d as Table,c as default};

