<%= turbo_frame_tag(post) do %>
  <article class="post-card">
    <% if post.title.present? %>
      <div class="post-card-title"><%= post.emoji %> <%= post.title %></div>
    <% else %>
      <div class="content"><%= post.content_html %></div>
    <% end %>
    <% if post.book.present? %>
      <div class="post-card-book d-flex align-items-center gap-2 my-2 p-2 bg-body-tertiary rounded">
        <% if post.book.cover_image&.file&.attached? %>
          <%= image_tag post.book.cover_image.file.variant(:mobile_x1_webp), style: 'max-height: 40px;', class: 'rounded' %>
        <% elsif post.book.emoji.present? %>
          <span style="font-size: 1.5rem;"><%= post.book.emoji %></span>
        <% end %>
        <div class="flex-grow-1">
          <div class="fw-semibold small"><%= post.book.title %></div>
          <div class="text-muted small"><%= post.book.author %></div>
        </div>
        <% if post.book.rating.present? %>
          <small class="text-warning"><%= '★' * post.book.rating %><%= '☆' * (5 - post.book.rating) %></small>
        <% end %>
      </div>
    <% end %>
    <div class="post-card-meta">
      <span class="badge bg-secondary"><%= l(post.created_at, format: :long) %></span>
    </div>
    <div class="post-card-actions">
      <%= link_to('Edit', edit_site_post_path(current_site, post), data: { turbo_frame: :content }, class: 'btn btn-outline-secondary btn-sm') %>
      <%= link_to('Delete', site_post_path(current_site, post), data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' }, class: 'btn btn-outline-danger btn-sm') %>
    </div>
  </article>
<% end %>
