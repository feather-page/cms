<!DOCTYPE html>
<html>
  <head>
    <title>feather.page</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%# Apply theme immediately to prevent flash %>
    <script>
      (function() {
        var theme = localStorage.getItem('feather-theme');
        if (!theme) {
          theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }
        document.documentElement.setAttribute('data-bs-theme', theme);
      })();
    </script>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <meta name="turbo-refresh-method" content="morph">
  </head>
  <body>
    <%= render 'layouts/top_navigation' %>
    <div class="container mt-5">
      <% if current_site %>
        <%= component('SiteNavigation', current_site:) %>
      <% end %>
      <%= render 'layouts/notices' %>
      <%= yield %>
    </div>

  </body>
</html>
