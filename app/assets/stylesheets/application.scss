/*
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS (and SCSS, if configured) file within this directory, lib/assets/stylesheets, or any plugin's
 * vendor/assets/stylesheets directory can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the bottom of the
 * compiled file so the styles you add here take precedence over styles defined in any other CSS
 * files in this directory. Styles in this file should be added after the last require_* statement.
 * It is generally better to create a new file per style scope.
 *
 *= require bootstrap-icons
 *= require_self
 *= require_tree .
 */
// Warm & Earthy Color Palette (SCSS variables for Bootstrap)
$warm-terracotta: #c45d3e;
$warm-terracotta-dark: #a84a2e;
$warm-amber: #d4a03a;
$warm-sand: #f5f0e8;
$warm-stone: #e8e0d5;
$warm-gray: #6b635a;
$warm-gray-light: #9a938a;
$warm-charcoal: #3d3832;

// Bootstrap variable overrides
$primary: $warm-terracotta;
$secondary: $warm-gray;
$body-bg: #fdfcfa;
$link-color: $warm-terracotta;
$link-hover-color: $warm-terracotta-dark;

@import "bootstrap";

// ============================================
// CSS Custom Properties for Theming
// ============================================
:root {
  // Brand colors
  --color-primary: #c45d3e;
  --color-primary-dark: #a84a2e;
  --color-accent: #d4a03a;

  // Background colors
  --color-bg: #fdfcfa;
  --color-bg-elevated: #ffffff;
  --color-bg-muted: #f5f0e8;
  --color-bg-subtle: #e8e0d5;

  // Text colors
  --color-text: #3d3832;
  --color-text-muted: #6b635a;
  --color-text-subtle: #9a938a;

  // Border colors
  --color-border: #e8e0d5;
  --color-border-muted: #f5f0e8;

  // Navbar
  --color-navbar-bg: #3d3832;
  --color-navbar-text: rgba(255, 255, 255, 0.85);

  // Cards & surfaces
  --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.04);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
  --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.12);

  // Alerts
  --color-success: #5a8a5a;
  --color-success-bg: rgba(90, 138, 90, 0.15);
  --color-danger: #b54444;
  --color-danger-bg: rgba(181, 68, 68, 0.15);
  --color-info-bg: rgba(212, 160, 58, 0.15);

  color-scheme: light;
}

// ============================================
// Dark Mode Theme
// ============================================
[data-bs-theme="dark"] {
  // Brand colors (slightly brighter for dark mode)
  --color-primary: #e07055;
  --color-primary-dark: #c45d3e;
  --color-accent: #e8b84a;

  // Background colors
  --color-bg: #1a1816;
  --color-bg-elevated: #252220;
  --color-bg-muted: #2d2a27;
  --color-bg-subtle: #3d3832;

  // Text colors
  --color-text: #f5f0e8;
  --color-text-muted: #c4bdb4;
  --color-text-subtle: #9a938a;

  // Border colors
  --color-border: #3d3832;
  --color-border-muted: #2d2a27;

  // Navbar
  --color-navbar-bg: #121110;
  --color-navbar-text: rgba(255, 255, 255, 0.9);

  // Cards & surfaces
  --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.2);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.4);

  // Alerts
  --color-success-bg: rgba(90, 138, 90, 0.25);
  --color-danger-bg: rgba(181, 68, 68, 0.25);
  --color-info-bg: rgba(212, 160, 58, 0.25);

  // Override Bootstrap CSS variables with warm palette
  --bs-body-bg: #1a1816;
  --bs-body-color: #f5f0e8;
  --bs-border-color: #3d3832;
  --bs-tertiary-bg: #2d2a27;
  --bs-secondary-bg: #252220;
  --bs-emphasis-color: #f5f0e8;
  --bs-secondary-color: #c4bdb4;
  --bs-tertiary-color: #9a938a;
  --bs-primary: #e07055;
  --bs-link-color: #e07055;
  --bs-link-hover-color: #c45d3e;
  --bs-heading-color: #f5f0e8;
  --bs-card-bg: #252220;
  --bs-card-cap-bg: #2d2a27;
  --bs-card-color: #f5f0e8;
  --bs-card-border-color: #3d3832;
  --bs-table-bg: #252220;
  --bs-table-color: #f5f0e8;
  --bs-table-border-color: #3d3832;
  --bs-table-striped-bg: #2d2a27;
  --bs-table-hover-bg: #2d2a27;

  color-scheme: dark;
}

/* Offset for fixed-top Bootstrap navbar so content doesn't sit underneath */
body {
  padding-top: 4rem; /* ~64px: safe across breakpoints; adjust if navbar height changes */
  background-color: var(--color-bg);
  color: var(--color-text);
  transition: background-color 0.3s ease, color 0.3s ease;
}

.emoji {
  font-size: 3em;
}

.content {
  overflow: hidden;

  // Allow EditorJS toolbar and menus to overflow
  &.editorjs {
    overflow: visible;
  }

  figure {
    margin: 1em 0 !important;

    img {
      max-width: 100% !important;
      height: auto !important;
    }
  }

  img {
    max-width: 100% !important;
    height: auto !important;
  }
}

/* Keep editor styles independent of framework */
.editorjs {
  border: 1px solid transparent;

  padding-bottom: calc(0.5em - 1px);
  padding-left: calc(0.75em - 1px);
  padding-right: calc(0.75em - 1px);
  padding-top: calc(0.5em - 1px);

  background-color: var(--color-bg-elevated);
  border-color: var(--color-border);
  border-radius: 4px;
  color: var(--color-text);
  box-shadow: inset 0 0.0625em 0.125em rgba(10, 10, 10, 0.05);

  min-height: 100px;

  .ce-block__content,
  .ce-toolbar__content {
    max-width: unset;
  }

  .ce-toolbar {
    margin-left: -1em;
  }

  .tc-toolbox__toggler {
    margin-left: -1.2em;
  }

  .codex-editor__redactor {
    padding-bottom: 3em !important;
  }
}

.labeled-divider {
  border-bottom: 1px dotted var(--color-border);
  line-height: 0;
  margin: 1.5em 0;
  text-align: center;
}

.labeled-divider span {
  background-color: var(--color-bg);
  padding: 0 1em;
  font-weight: 600;
  color: var(--color-text-muted);
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

// Site Navigation Styling
.site-navigation {
  background-color: var(--color-bg-muted);
  border-radius: 8px;
  padding: 1rem;
  margin-bottom: 1.5rem;

  .site-header {
    color: var(--color-text);

    .bi {
      color: var(--color-primary);
    }
  }

  // Reset any nav styles that might leak from other CSS
  > nav {
    background-color: transparent;
    max-width: none;
    margin: 0;
    padding: 0;
    position: static;
  }

  .nav-pills {
    .nav-link {
      color: var(--color-text-muted);
      border-radius: 6px;
      transition: all 0.2s ease;

      &:hover {
        background-color: var(--color-bg-subtle);
        color: var(--color-text);
      }

      &.active {
        background-color: var(--color-primary);
        color: white;
      }
    }
  }
}

// Site Cards for Index
.site-card {
  background-color: var(--color-bg-elevated);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 1rem;
  transition: all 0.2s ease;
  box-shadow: var(--shadow-sm);

  &:hover {
    border-color: var(--color-primary);
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
  }

  .site-card-title {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 0.5rem;

    a {
      color: var(--color-text);
      text-decoration: none;

      &:hover {
        color: var(--color-primary);
      }
    }
  }

  .site-card-domain {
    color: var(--color-text-subtle);
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;

    .bi {
      color: var(--color-accent);
    }
  }
}

// ============================================
// Main Navbar
// ============================================
nav.navbar-main {
  // Ensure navbar isn't constrained by any rogue nav max-width
  max-width: none !important;

  background-color: var(--color-navbar-bg) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  transition: background-color 0.3s ease;

  .navbar-brand {
    color: white !important;
    font-weight: 600;

    &:hover {
      color: var(--color-accent) !important;
    }
  }

  .nav-link {
    color: var(--color-navbar-text) !important;
    font-weight: 500;
    transition: color 0.2s ease;

    &:hover {
      color: var(--color-accent) !important;
    }
  }

  .navbar-toggler {
    border-color: rgba(255, 255, 255, 0.3);
    background-color: transparent;

    .navbar-toggler-icon {
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.75%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
    }
  }

  // Theme toggle button
  .theme-toggle {
    background: none;
    border: none;
    color: var(--color-navbar-text);
    padding: 0.5rem;
    cursor: pointer;
    transition: color 0.2s ease;
    display: flex;
    align-items: center;

    &:hover {
      color: var(--color-accent);
    }

    .bi {
      font-size: 1.25rem;
    }
  }
}

// ============================================
// Tables
// ============================================
.table {
  --bs-table-bg: var(--color-bg-elevated);
  border-color: var(--color-border);

  thead {
    background-color: var(--color-bg-muted);

    th {
      color: var(--color-text);
      font-weight: 600;
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.03em;
      border-bottom: 2px solid var(--color-border);
      padding: 0.875rem 1rem;
    }
  }

  tbody {
    tr {
      transition: background-color 0.15s ease;

      &:hover {
        background-color: var(--color-bg-muted);
      }

      td {
        padding: 0.875rem 1rem;
        vertical-align: middle;
        border-color: var(--color-border);
        color: var(--color-text);
      }
    }
  }

  &.table-bordered {
    border: 1px solid var(--color-border);
    border-radius: 8px;
    overflow: hidden;

    > :not(caption) > * > * {
      border-color: var(--color-border);
    }
  }
}

// ============================================
// Buttons
// ============================================
.btn {
  font-weight: 500;
  border-radius: 6px;
  transition: all 0.2s ease;
}

.btn-primary {
  background-color: var(--color-primary);
  border-color: var(--color-primary);

  &:hover, &:focus {
    background-color: var(--color-primary-dark);
    border-color: var(--color-primary-dark);
  }
}

.btn-secondary {
  background-color: var(--color-text-muted);
  border-color: var(--color-text-muted);

  &:hover, &:focus {
    background-color: var(--color-text);
    border-color: var(--color-text);
  }
}

.btn-outline-secondary {
  color: var(--color-text-muted);
  border-color: var(--color-border);

  &:hover, &:focus {
    background-color: var(--color-bg-muted);
    border-color: var(--color-text-muted);
    color: var(--color-text);
  }
}

.btn-outline-primary {
  color: var(--color-primary);
  border-color: var(--color-primary);

  &:hover, &:focus {
    background-color: var(--color-primary);
    border-color: var(--color-primary);
    color: white;
  }
}

.btn-outline-danger {
  color: var(--color-danger);
  border-color: var(--color-danger-bg);

  &:hover, &:focus {
    background-color: var(--color-danger);
    border-color: var(--color-danger);
    color: white;
  }
}

// ============================================
// Alerts & Notices
// ============================================
.alert {
  border-radius: 8px;
  border: none;
}

.alert-info {
  background-color: var(--color-info-bg);
  color: var(--color-accent);
  border-left: 4px solid var(--color-accent);

  .btn-close {
    filter: none;
    opacity: 0.6;

    &:hover {
      opacity: 1;
    }
  }
}

.alert-secondary {
  background-color: var(--color-bg-muted);
  color: var(--color-text-muted);
  border-left: 4px solid var(--color-border);

  .alert-heading {
    color: var(--color-text);
  }
}

.alert-success {
  background-color: var(--color-success-bg);
  color: var(--color-success);
  border-left: 4px solid var(--color-success);
}

.alert-danger {
  background-color: var(--color-danger-bg);
  color: var(--color-danger);
  border-left: 4px solid var(--color-danger);
}

// ============================================
// Forms
// ============================================
.form-control, .form-select {
  background-color: var(--color-bg-elevated);
  border-color: var(--color-border);
  border-radius: 6px;
  color: var(--color-text);
  transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.3s ease;

  &:focus {
    background-color: var(--color-bg-elevated);
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(196, 93, 62, 0.15);
    color: var(--color-text);
  }

  &::placeholder {
    color: var(--color-text-subtle);
  }
}

.form-label {
  color: var(--color-text);
  font-weight: 500;
  font-size: 0.9rem;
}

.form-text {
  color: var(--color-text-subtle);
}

.form-check-input {
  background-color: var(--color-bg-elevated);
  border-color: var(--color-border);

  &:checked {
    background-color: var(--color-primary);
    border-color: var(--color-primary);
  }

  &:focus {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(196, 93, 62, 0.15);
  }
}

// ============================================
// Page Headers
// ============================================
.page-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid var(--color-border);

  h1, .h1, h4, .h4 {
    margin: 0;
    color: var(--color-text);

    .bi {
      color: var(--color-primary);
      margin-right: 0.5rem;
    }
  }
}

h1, .h1 {
  color: var(--color-text);

  .bi {
    color: var(--color-primary);
  }
}

h4, .h4 {
  color: var(--color-text);

  .bi {
    color: var(--color-primary);
  }
}

// ============================================
// Post/Article Cards
// ============================================
.post-card {
  background-color: var(--color-bg-elevated);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  padding: 1.25rem;
  margin-bottom: 1rem;
  transition: all 0.2s ease;
  overflow: hidden;

  &:hover {
    border-color: var(--color-bg-subtle);
    box-shadow: var(--shadow-sm);
  }

  .post-card-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--color-text);
    margin-bottom: 0.5rem;
  }

  .post-card-meta {
    margin-bottom: 0.75rem;
  }

  .post-card-actions {
    display: flex;
    gap: 0.5rem;
  }

  .content {
    img {
      max-width: 100% !important;
      height: auto !important;
      border-radius: 6px;
    }
  }
}

// ============================================
// Badges
// ============================================
.badge {
  font-weight: 500;
  padding: 0.4em 0.65em;
  border-radius: 4px;
}

.badge.bg-secondary {
  background-color: var(--color-bg-muted) !important;
  color: var(--color-text-muted) !important;
}

// ============================================
// Horizontal Rules
// ============================================
hr {
  border-color: var(--color-border);
  opacity: 1;
}

// ============================================
// Login Page
// ============================================
.login-container {
  max-width: 400px;
  margin: 2rem auto;
  padding: 2rem;
  background-color: var(--color-bg-elevated);
  border-radius: 12px;
  box-shadow: var(--shadow-md);
  border: 1px solid var(--color-border);

  h1 {
    text-align: center;
    margin-bottom: 1.5rem;
    color: var(--color-text);
  }

  .login-subtitle {
    text-align: center;
    color: var(--color-text-muted);
    margin-bottom: 1.5rem;
  }
}

// ============================================
// EditorJS Updates
// ============================================
.editorjs {
  border-color: var(--color-border);
  border-radius: 6px;

  &:focus-within {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(196, 93, 62, 0.15);
  }

  .book-tool {
    margin-bottom: 1rem;
  }
}

[data-bs-theme="dark"] .editorjs {
  .ce-popover {
    background-color: var(--color-bg-elevated);
    border-color: var(--color-border);

    &__item:hover {
      background-color: var(--color-bg-muted);
    }

    &__item-icon {
      background-color: var(--color-bg-muted);
      color: var(--color-text);
    }
  }

  .ce-toolbar__plus,
  .ce-toolbar__settings-btn {
    color: var(--color-text-muted);
    background-color: var(--color-bg-muted);

    &:hover {
      color: var(--color-text);
      background-color: var(--color-bg-subtle);
    }
  }

  .ce-inline-toolbar {
    background-color: var(--color-bg-elevated);
    border-color: var(--color-border);
    color: var(--color-text);

    .ce-inline-tool:hover {
      background-color: var(--color-bg-muted);
    }
  }

  .cdx-search-field {
    background-color: var(--color-bg-muted);
    color: var(--color-text);
    border-color: var(--color-border);
  }
}

// ============================================
// Modal Styling
// ============================================
.modal {
  &::backdrop {
    background-color: rgba(0, 0, 0, 0.5);
  }
}

dialog {
  background-color: var(--color-bg-elevated);
  color: var(--color-text);
  border: none;
  border-radius: 12px;
  box-shadow: var(--shadow-lg);
  padding: 1.5rem;

  &::backdrop {
    background-color: rgba(0, 0, 0, 0.5);
  }
}

// ============================================
// Pagination
// ============================================
.pagination {
  .page-link {
    background-color: var(--color-bg-elevated);
    color: var(--color-primary);
    border-color: var(--color-border);

    &:hover {
      background-color: var(--color-bg-muted);
      border-color: var(--color-border);
      color: var(--color-primary-dark);
    }
  }

  .page-item.active .page-link {
    background-color: var(--color-primary);
    border-color: var(--color-primary);
    color: white;
  }

  .page-item.disabled .page-link {
    color: var(--color-text-subtle);
    background-color: var(--color-bg-elevated);
    border-color: var(--color-border);
  }
}

// ============================================
// Links
// ============================================
a {
  color: var(--color-primary);

  &:hover {
    color: var(--color-primary-dark);
  }
}


